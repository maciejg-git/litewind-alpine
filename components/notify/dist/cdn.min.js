(()=>{function a(s){s.data("notify",()=>({notifications:[],notifyId:1e3,buffer:[],notificationsSticky:[],order:"default",maxNotifications:0,stickyAt:"end",delay:1e4,dismissable:!0,static:!1,variant:"info",options:{},init(){this.$nextTick(()=>{this.order=s.bound(this.$el,"data-order")??this.order,this.stickyAt=s.bound(this.$el,"data-sticky-at")??this.stickyAt,this.maxNotifications=parseInt(s.bound(this.$el,"data-max-notifications")??this.maxNotifications),this.delay=parseInt(s.bound(this.$el,"data-delay")??this.delay),this.dismissable=JSON.parse(s.bound(this.$el,"data-dismissable")??this.dismissable),this.static=JSON.parse(s.bound(this.$el,"data-static")??this.static),this.variant=s.bound(this.$el,"data-variant")??this.variant,this.options=s.bound(this.$el,"data-options")??this.options}),s.bind(this.$el,{"@show-notify.window"(){let t=this.$event.detail.id||null,i=this.$root.id||null;(t===null&&i===null||t===i)&&this.push(this.$event.detail)}}),s.bind(this.$el,{"@mouseenter"(){this.handleContainerMouseEnter()},"@mouseleave"(){this.handleContainerMouseLeave()}})},getNotifications(){if(this.order==="default"&&this.stickyAt==="end")return[...this.notifications,...this.notificationsSticky];if(this.order==="default"&&this.stickyAt==="start")return[...this.notificationsSticky,...this.notifications];if(this.order==="reversed"&&this.stickyAt==="end")return[...this.notifications.toReversed(),...this.notificationsSticky.toReversed()];if(this.order==="reversed"&&this.stickyAt==="start")return[...this.notificationsSticky.toReversed(),...this.notifications.toReversed()]},handleContainerMouseEnter(){this.notifications.forEach(t=>{t.pauseTimer()})},handleContainerMouseLeave(){this.notifications.forEach(t=>{t.restartTimer()})},remove(t){t.sticky?this.removeStickyById(t.notifyId):this.removeById(t.notifyId)},removeById(t){let i=this.notifications.findIndex(e=>t===e.notifyId);if(this.notifications.splice(i,1),this.buffer.length){let e=this.buffer.shift();e.restartTimer(),this.notifications.push(e)}},removeStickyById(t){let i=this.notificationsSticky.findIndex(e=>t===e.notifyId);this.notificationsSticky.splice(i,1)},close(){this.notify.isVisible.value=!1},push(t){let i={header:t?.header||"",text:t?.text||"",delay:t?.delay??this.delay,dismissable:t?.dismissable??this.dismissable,static:t?.static??this.static,sticky:t?.sticky??!1,variant:t?.variant??this.variant,options:t?.options??this.options??null,notifyId:this.notifyId,isVisible:s.reactive({value:!1}),timer:null};if(i.restartTimer=function(){if(this.static)return null;this.timer=setTimeout(()=>this.isVisible.value=!1,this.delay)},i.pauseTimer=function(){this.timer&&clearTimeout(this.timer)},this.notifyId++,i.sticky){i.restartTimer(),this.notificationsSticky.push(i);return}if(this.maxNotifications>0&&this.notifications.length>=this.maxNotifications){this.buffer.push(i);return}i.restartTimer(),this.notifications.push(i)},notification:{"x-show"(){return this.notify.isVisible.value},"x-init"(){this.$nextTick(()=>this.notify.isVisible.value=!0),this.$watch("notify.isVisible.value",t=>{t||s.bind(this.$el,{"@transitionend"(){this.remove(this.notify)},"@transitioncancel"(){this.remove(this.notify)}})})},...{role:"status"}.notification}}))}document.addEventListener("alpine:init",()=>{Alpine.plugin(a)});})();
