(()=>{function a(s){s.data("notify",()=>({_notifications:[],_notifyId:1e3,_buffer:[],_notificationsSticky:[],_order:"default",_maxNotifications:0,_delay:1e4,_dismissable:!0,_static:!1,_variant:"info",_options:{},init(){this.$nextTick(()=>{this._order=s.bound(this.$el,"data-order")??this._order,this._maxNotifications=parseInt(s.bound(this.$el,"data-max-notifications")??this._maxNotifications),this._delay=parseInt(s.bound(this.$el,"data-delay")??this._delay),this._dismissable=JSON.parse(s.bound(this.$el,"data-dismissable")??this._dismissable),this._static=JSON.parse(s.bound(this.$el,"data-static")??this._static),this._variant=s.bound(this.$el,"data-variant")??this._variant,this._options=s.bound(this.$el,"data-options")??this._options}),s.bind(this.$el,{"@show-notify.window"(){let i=this.$event.detail.id||null,t=this.$root.id||null;(i===null&&t===null||i===t)&&this.push(this.$event.detail)}}),s.bind(this.$el,{"@mouseenter"(){this.handleContainerMouseEnter()},"@mouseleave"(){this.handleContainerMouseLeave()}})},getNotifications(){if(this._order==="default")return[...this._notifications,...this._notificationsSticky];if(this._order==="reversed")return[...this._notificationsSticky.toReversed(),...this._notifications.toReversed()]},handleContainerMouseEnter(){this._notifications.forEach(i=>{i.pauseTimer()})},handleContainerMouseLeave(){this._notifications.forEach(i=>{i.restartTimer()})},remove(i){i.sticky?this.removeStickyById(i.notifyId):this.removeById(i.notifyId)},removeById(i){let t=this._notifications.findIndex(e=>i===e.notifyId);if(this._notifications.splice(t,1),this._buffer.length){let e=this._buffer.shift();e.restartTimer(),this._notifications.push(e)}},removeStickyById(i){let t=this._notificationsSticky.findIndex(e=>i===e.notifyId);this._notificationsSticky.splice(t,1)},close(){this.notify.isVisible.value=!1},push(i){let t={header:i?.header||"",text:i?.text||"",delay:i?.delay??this._delay,dismissable:i?.dismissable??this._dismissable,static:i?.static??this._static,sticky:i?.sticky??!1,variant:i?.variant??this._variant,options:i?.options??this._options??null,notifyId:this._notifyId,isVisible:s.reactive({value:!1}),timer:null};if(t.restartTimer=function(){if(this.static)return null;this.timer=setTimeout(()=>this.isVisible.value=!1,this.delay)},t.pauseTimer=function(){this.timer&&clearTimeout(this.timer)},this._notifyId++,t.sticky){t.restartTimer(),this._notificationsSticky.push(t);return}if(this._maxNotifications>0&&this._notifications.length>=this._maxNotifications){this._buffer.push(t);return}t.restartTimer(),this._notifications.push(t)},notification:{"x-show"(){return this.notify.isVisible.value},"x-init"(){this.$nextTick(()=>this.notify.isVisible.value=!0),this.$watch("notify.isVisible.value",i=>{i||s.bind(this.$el,{"@transitionend"(){this.remove(this.notify)},"@transitioncancel"(){this.remove(this.notify)}})})},...{role:"status"}.notification}}))}document.addEventListener("alpine:init",()=>{Alpine.plugin(a)});})();
