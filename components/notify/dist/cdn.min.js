(()=>{function a(s){s.data("notify",()=>({notifications:[],notifyId:1e3,buffer:[],notificationsSticky:[],order:"default",maxNotifications:0,delay:1e4,dismissable:!0,static:!1,variant:"info",options:{},init(){this.$nextTick(()=>{this.order=s.bound(this.$el,"data-order")??this.order,this.maxNotifications=parseInt(s.bound(this.$el,"data-max-notifications")??this.maxNotifications),this.delay=parseInt(s.bound(this.$el,"data-delay")??this.delay),this.dismissable=JSON.parse(s.bound(this.$el,"data-dismissable")??this.dismissable),this.static=JSON.parse(s.bound(this.$el,"data-static")??this.static),this.variant=s.bound(this.$el,"data-variant")??this.variant,this.options=s.bound(this.$el,"data-options")??this.options}),s.bind(this.$el,{"@show-notify.window"(){let i=this.$event.detail.id||null,t=this.$root.id||null;(i===null&&t===null||i===t)&&this.push(this.$event.detail)}}),s.bind(this.$el,{"@mouseenter"(){this.handleContainerMouseEnter()},"@mouseleave"(){this.handleContainerMouseLeave()}})},getNotifications(){if(this.order==="default")return[...this.notifications,...this.notificationsSticky];if(this.order==="reversed")return[...this.notificationsSticky.toReversed(),...this.notifications.toReversed()]},handleContainerMouseEnter(){this.notifications.forEach(i=>{i.pauseTimer()})},handleContainerMouseLeave(){this.notifications.forEach(i=>{i.restartTimer()})},remove(i){i.sticky?this.removeStickyById(i.notifyId):this.removeById(i.notifyId)},removeById(i){let t=this.notifications.findIndex(e=>i===e.notifyId);if(this.notifications.splice(t,1),this.buffer.length){let e=this.buffer.shift();e.restartTimer(),this.notifications.push(e)}},removeStickyById(i){let t=this.notificationsSticky.findIndex(e=>i===e.notifyId);this.notificationsSticky.splice(t,1)},close(){this.notify.isVisible.value=!1},push(i){let t={header:i?.header||"",text:i?.text||"",delay:i?.delay??this.delay,dismissable:i?.dismissable??this.dismissable,static:i?.static??this.static,sticky:i?.sticky??!1,variant:i?.variant??this.variant,options:i?.options??this.options??null,notifyId:this.notifyId,isVisible:s.reactive({value:!1}),timer:null};if(t.restartTimer=function(){if(this.static)return null;this.timer=setTimeout(()=>this.isVisible.value=!1,this.delay)},t.pauseTimer=function(){this.timer&&clearTimeout(this.timer)},this.notifyId++,t.sticky){t.restartTimer(),this.notificationsSticky.push(t);return}if(this.maxNotifications>0&&this.notifications.length>=this.maxNotifications){this.buffer.push(t);return}t.restartTimer(),this.notifications.push(t)},notification:{"x-show"(){return this.notify.isVisible.value},"x-init"(){this.$nextTick(()=>this.notify.isVisible.value=!0),this.$watch("notify.isVisible.value",i=>{i||s.bind(this.$el,{"@transitionend"(){this.remove(this.notify)},"@transitioncancel"(){this.remove(this.notify)}})})},...{role:"status"}.notification}}))}document.addEventListener("alpine:init",()=>{Alpine.plugin(a)});})();
