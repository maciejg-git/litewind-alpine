(()=>{function i(e){e.data("dropdownContext",()=>{let s={menu:{":role"(){return this._role},tabindex:0},menuItem:{role:"menuitem",tabindex:-1}},o=["menu","listbox","dialog"],u=["placement","offsetX","offsetY","flip","autoPlacement","inline"];return{_isOpen:!1,_floating:null,contextData:{},_menuItems:null,_focusedMenuItemIndex:-1,_autoClose:!0,_placement:"bottom-start",_offsetX:0,_offsetY:0,_flip:!1,_autoPlacement:!1,_role:"",init(){this.$nextTick(()=>{this._autoClose=JSON.parse(e.bound(this.$el,"data-auto-close")??this._autoClose),this._placement=e.bound(this.$el,"data-placement")??this._placement,this._offsetX=parseInt(e.bound(this.$el,"data-offset-x")??this._offsetX),this._offsetY=parseInt(e.bound(this.$el,"data-offset-y")??this._offsetY),this._flip=JSON.parse(e.bound(this.$el,"data-flip")??this._flip),this._autoPlacement=JSON.parse(e.bound(this.$el,"data-auto-placement")??this._autoPlacement);let t=e.bound(this.$el,"data-role");this._role=o.includes(t)?t:null;let l=u.reduce((a,n)=>({...a,[n]:this[n]}));this._floating=useFloating(null,this.$refs.menu,l)}),e.bind(this.$el,{"@keydown.escape.window.prevent"(){this.close()},"@keydown.down.prevent"(){this._menuItems.length&&this.$nextTick(()=>{this._focusedMenuItemIndex<this._menuItems.length-1&&this._focusedMenuItemIndex++,this._menuItems[this._focusedMenuItemIndex].focus()})},"@keydown.up.prevent"(){this._menuItems.length&&(this._focusedMenuItemIndex===-1&&(this._focusedMenuItemIndex=this._menuItems.length),this.$nextTick(()=>{this._focusedMenuItemIndex>0&&this._focusedMenuItemIndex--,this._menuItems[this._focusedMenuItemIndex].focus()}))}})},open(){this._floating.startAutoUpdate(),this._isOpen=!0,this._menuItems=this.$refs.menu.querySelectorAll("[role='menuitem']"),this.$nextTick(()=>this.$refs.menu.focus())},close(){this._floating.destroy(),this._isOpen=!1,this._focusedMenuItemIndex=-1},menu:{"x-show"(){return this._isOpen},"@open-contextmenu.window"(){if(this.$event.detail.id!==this.$root.id)return;let t=this.$event.detail.$event;this._floating.updateVirtualElement(t),this.contextData=this.$event.detail.data,this.open()},"x-ref":"menu","@click.outside"(){this.close()},"@click"(){this._autoClose&&this.$el.contains(this.$event.target)&&this.close()},...s.menu},menuItem:{...s.menuItem}}})}document.addEventListener("alpine:init",()=>{Alpine.plugin(i)});})();
