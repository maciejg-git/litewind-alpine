(()=>{function i(e){e.data("dropdownContext",()=>{let s={menu:{":role"(){return this.role},tabindex:0},menuItem:{role:"menuitem",tabindex:-1}},o=["menu","listbox","dialog"],u=["placement","offsetX","offsetY","flip","autoPlacement","inline"];return{isOpen:!1,floating:null,contextData:{},menuItems:null,focusedMenuItemIndex:-1,autoClose:!0,placement:"bottom-start",offsetX:0,offsetY:0,flip:!1,autoPlacement:!1,role:"",init(){this.$nextTick(()=>{this.autoClose=JSON.parse(e.bound(this.$el,"data-auto-close")??this.autoClose),this.placement=e.bound(this.$el,"data-placement")??this.placement,this.offsetX=parseInt(e.bound(this.$el,"data-offset-x")??this.offsetX),this.offsetY=parseInt(e.bound(this.$el,"data-offset-y")??this.offsetY),this.flip=JSON.parse(e.bound(this.$el,"data-flip")??this.flip),this.autoPlacement=JSON.parse(e.bound(this.$el,"data-auto-placement")??this.autoPlacement);let t=e.bound(this.$el,"data-role");this.role=o.includes(t)?t:null;let l=u.reduce((a,n)=>({...a,[n]:this[n]}));this.floating=useFloating(null,this.$refs.menu,l)}),e.bind(this.$el,{"@keydown.escape.window.prevent"(){this.close()},"@keydown.down.prevent"(){this.menuItems.length&&this.$nextTick(()=>{this.focusedMenuItemIndex<this.menuItems.length-1&&this.focusedMenuItemIndex++,this.menuItems[this.focusedMenuItemIndex].focus()})},"@keydown.up.prevent"(){this.menuItems.length&&(this.focusedMenuItemIndex===-1&&(this.focusedMenuItemIndex=this.menuItems.length),this.$nextTick(()=>{this.focusedMenuItemIndex>0&&this.focusedMenuItemIndex--,this.menuItems[this.focusedMenuItemIndex].focus()}))}})},open(){this.floating.startAutoUpdate(),this.isOpen=!0,this.menuItems=this.$refs.menu.querySelectorAll("[role='menuitem']"),this.$nextTick(()=>this.$refs.menu.focus())},close(){this.floating.destroy(),this.isOpen=!1,this.focusedMenuItemIndex=-1},menu:{"x-show"(){return this.isOpen},"@open-contextmenu.window"(){if(this.$event.detail.id!==this.$root.id)return;let t=this.$event.detail.$event;this.floating.updateVirtualElement(t),this.contextData=this.$event.detail.data,this.open()},"x-ref":"menu","@click.outside"(){this.close()},"@click"(){this.autoClose&&this.$el.contains(this.$event.target)&&this.close()},...s.menu},menuItem:{...s.menuItem}}})}document.addEventListener("alpine:init",()=>{Alpine.plugin(i)});})();
