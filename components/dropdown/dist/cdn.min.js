(()=>{function o(e){e.data("dropdown",()=>{let t={main:{"x-id"(){return["dropdown-aria"]}},trigger:{":aria-expanded"(){return this.isOpen},":aria-controls"(){return this.$id("dropdown-aria")},":aria-haspopup"(){return this._role}},menu:{":id"(){return this.$id("dropdown-aria")},":role"(){return this._role}},menuItem:{role:"menuitem",tabindex:-1}},r=["menu","listbox","dialog"],h=["placement","offsetX","offsetY","flip","autoPlacement","inline"];return{_isOpen:!1,_floating:null,_hideTimeout:null,_menuItemsElements:null,_focusedMenuItemIndex:-1,_triggerEv:"click",_autoClose:!0,_placement:"bottom-start",_offsetX:0,_offsetY:0,_flip:!1,_autoPlacement:!1,_role:"",init(){this.$nextTick(()=>{this._triggerEv=e.bound(this.$el,"data-trigger-event")??this._triggerEv,this._autoClose=JSON.parse(e.bound(this.$el,"data-auto-close")??this._autoClose),this._placement=e.bound(this.$el,"data-placement")??this._placement,this._offsetX=parseInt(e.bound(this.$el,"data-offset-x")??this._offsetX),this._offsetY=parseInt(e.bound(this.$el,"data-offset-y")??this._offsetY),this._flip=JSON.parse(e.bound(this.$el,"data-flip")??this._flip),this._autoPlacement=JSON.parse(e.bound(this.$el,"data-auto-placement")??this._autoPlacement);let i=e.bound(this.$el,"data-role");this._role=r.includes(i)?i:null;let u=h.reduce((l,n)=>({...l,[n]:this[n]}));this._floating=useFloating(this.$refs.trigger||this.$root.querySelector("[x-bind='trigger']"),this.$refs.menu,u);let s={};this._triggerEv==="click"&&(s["@click"]=function(){this.toggle()}),this._triggerEv==="hover"&&(s["@mouseenter"]=function(){this.open()},s["@mouseleave"]=function(){this.close()}),e.bind(this.$refs.trigger||this.$root.querySelector("[x-bind='trigger']"),s)}),e.bind(this.$el,{"@keydown.escape.prevent"(){this.close()},"@keydown.down.prevent"(){this._isOpen||this.open(),this._menuItemsElements.length&&this.$nextTick(()=>{this._focusedMenuItemIndex<this._menuItemsElements.length-1&&this._focusedMenuItemIndex++,this._menuItemsElements[this._focusedMenuItemIndex].focus()})},"@keydown.up.prevent"(){this._isOpen||this.open(),this._menuItemsElements.length&&(this._focusedMenuItemIndex===-1&&(this._focusedMenuItemIndex=this._menuItemsElements.length),this.$nextTick(()=>{this._focusedMenuItemIndex>0&&this._focusedMenuItemIndex--,this._menuItemsElements[this._focusedMenuItemIndex].focus()}))}}),e.bind(this.$el,t.main)},scheduleHide(){return setTimeout(()=>{this._floating.destroy(),this._isOpen=!1},100)},open(){this._triggerEv==="hover"&&clearTimeout(this._hideTimeout),this._floating.startAutoUpdate(),this._isOpen=!0,this._menuItemsElements=this.$refs.menu.querySelectorAll("[role='menuitem']")},close(){if(this._isOpen){if(this._triggerEv==="hover"){this._hideTimeout=this.scheduleHide();return}this._floating.destroy(),this._isOpen=!1,this._focusedMenuItemIndex=-1}},preventHiding(){this._triggerEv==="hover"&&clearTimeout(this._hideTimeout)},allowHiding(){this._triggerEv==="hover"&&(this._hideTimeout=this.scheduleHide())},toggle(){this._isOpen?this.close():this.open()},trigger:{"x-ref":"trigger",...t.trigger},menu:{"x-show"(){return this._isOpen},"x-ref":"menu","@mouseenter"(){this.preventHiding()},"@mouseleave"(){this.allowHiding()},"@click.outside"(){this.close()},"@click"(){this.$event.target!==this.$refs.menu&&this._autoClose&&this.$el.contains(this.$event.target)&&this.close()},...t.menu},menuItem:{...t.menuItem}}})}document.addEventListener("alpine:init",()=>{Alpine.plugin(o)});})();
