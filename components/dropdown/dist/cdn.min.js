(()=>{function o(e){e.data("dropdown",()=>{let t={main:{"x-id"(){return["dropdown-aria"]}},trigger:{":aria-expanded"(){return this.isOpen},":aria-controls"(){return this.$id("dropdown-aria")},":aria-haspopup"(){return this.role}},menu:{":id"(){return this.$id("dropdown-aria")},":role"(){return this.role}},menuItem:{role:"menuitem",tabindex:-1}},r=["menu","listbox","dialog"],h=["placement","offsetX","offsetY","flip","autoPlacement","inline"];return{isOpen:!1,floating:null,hideTimeout:null,menuItemsElements:null,focusedMenuItemIndex:-1,triggerEv:"click",autoClose:!0,placement:"bottom-start",offsetX:0,offsetY:0,flip:!1,autoPlacement:!1,role:"",init(){this.$nextTick(()=>{this.triggerEv=e.bound(this.$el,"data-trigger-event")??this.triggerEv,this.autoClose=JSON.parse(e.bound(this.$el,"data-auto-close")??this.autoClose),this.placement=e.bound(this.$el,"data-placement")??this.placement,this.offsetX=parseInt(e.bound(this.$el,"data-offset-x")??this.offsetX),this.offsetY=parseInt(e.bound(this.$el,"data-offset-y")??this.offsetY),this.flip=JSON.parse(e.bound(this.$el,"data-flip")??this.flip),this.autoPlacement=JSON.parse(e.bound(this.$el,"data-auto-placement")??this.autoPlacement);let i=e.bound(this.$el,"data-role");this.role=r.includes(i)?i:null;let u=h.reduce((l,n)=>({...l,[n]:this[n]}));this.floating=useFloating(this.$refs.trigger||this.$root.querySelector("[x-bind='trigger']"),this.$refs.menu,u);let s={};this.triggerEv==="click"&&(s["@click"]=function(){this.toggle()}),this.triggerEv==="hover"&&(s["@mouseenter"]=function(){this.open()},s["@mouseleave"]=function(){this.close()}),e.bind(this.$refs.trigger||this.$root.querySelector("[x-bind='trigger']"),s)}),e.bind(this.$el,{"@keydown.escape.prevent"(){this.close()},"@keydown.down.prevent"(){this.isOpen||this.open(),this.menuItemsElements.length&&this.$nextTick(()=>{this.focusedMenuItemIndex<this.menuItemsElements.length-1&&this.focusedMenuItemIndex++,this.menuItemsElements[this.focusedMenuItemIndex].focus()})},"@keydown.up.prevent"(){this.isOpen||this.open(),this.menuItemsElements.length&&(this.focusedMenuItemIndex===-1&&(this.focusedMenuItemIndex=this.menuItemsElements.length),this.$nextTick(()=>{this.focusedMenuItemIndex>0&&this.focusedMenuItemIndex--,this.menuItemsElements[this.focusedMenuItemIndex].focus()}))}}),e.bind(this.$el,t.main)},scheduleHide(){return setTimeout(()=>{this.floating.destroy(),this.isOpen=!1},100)},open(){this.triggerEv==="hover"&&clearTimeout(this.hideTimeout),this.floating.startAutoUpdate(),this.isOpen=!0,this.menuItemsElements=this.$refs.menu.querySelectorAll("[role='menuitem']")},close(){if(this.isOpen){if(this.triggerEv==="hover"){this.hideTimeout=this.scheduleHide();return}this.floating.destroy(),this.isOpen=!1,this.focusedMenuItemIndex=-1}},preventHiding(){this.triggerEv==="hover"&&clearTimeout(this.hideTimeout)},allowHiding(){this.triggerEv==="hover"&&(this.hideTimeout=this.scheduleHide())},toggle(){this.isOpen?this.close():this.open()},trigger:{"x-ref":"trigger",...t.trigger},menu:{"x-show"(){return this.isOpen},"x-ref":"menu","@mouseenter"(){this.preventHiding()},"@mouseleave"(){this.allowHiding()},"@click.outside"(){this.close()},"@click"(){this.$event.target!==this.$refs.menu&&this.autoClose&&this.$el.contains(this.$event.target)&&this.close()},...t.menu},menuItem:{...t.menuItem}}})}document.addEventListener("alpine:init",()=>{Alpine.plugin(o)});})();
