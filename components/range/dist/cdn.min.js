(()=>{function n(i){let h={sliderMin:{role:"slider",":aria-valuemin"(){return this._min},":aria-valuemax"(){return this._max},":aria-valuenow"(){return this.getValueMin()}},sliderMax:{role:"slider",":aria-valuemin"(){return this._min},":aria-valuemax"(){return this._max},":aria-valuenow"(){return this.getValueMax()}}},a=(e,t,s)=>e<=t?t:e>=s?s:e,r=(e,t)=>Math.round(e*t)*(1/t);i.data("range",()=>({_sliderMin:{value:0,name:"sliderMin"},_sliderMax:{value:0,name:"sliderMax"},_currentSlider:null,_onMousemove:null,_throttledOnMouseMove:null,_range:0,_steps:0,_maxValue:0,_model:[],_stepPrecision:0,_isFocused:!1,_min:0,_max:100,_step:1,_fixedMin:!1,_showSteps:!1,_showLabels:!1,_showLabelsOnFocus:!1,init(){this._onMousemove=this.handleMousmove.bind(this),this._throttledOnMouseMove=i.throttle(this._onMousemove,50),this.$nextTick(()=>{this._min=parseFloat(i.bound(this.$el,"data-min")??this._min),this._max=parseFloat(i.bound(this.$el,"data-max")??this._max),this._step=parseFloat(i.bound(this.$el,"data-step")??this._step),this._fixedMin=JSON.parse(i.bound(this.$el,"data-fixed-min")??this._fixedMin),this._showSteps=JSON.parse(i.bound(this.$el,"data-show-steps")??this._showSteps);let e=i.bound(this.$el,"data-show-labels")??this._showLabels;e=e==="true"?!0:e==="false"?!1:e,this._showLabelsOnFocus=e==="focus",this._showLabels=e&&!this._showLabelsOnFocus,this._range=this._max-this._min,this._steps=this._range/this._step,this._maxValue=Math.floor(this._steps)*this._step/this._range;let t=this._step.toString().split(".");this._stepPrecision=t[1]&&t[1].length||0,this.$watch("_model",this.onModelUpdate.bind(this)),this.onModelUpdate()}),i.bind(this.$el,{"x-modelable":"_model","@mousedown.prevent"(){this.handleMousedown()},"@mouseup.window"(){this.handleMouseup()},"@touchstart.passive"(){this.handleMousedown()},"@touchend"(){this.handleMouseup()},"@focusin"(){this._isFocused=!0},"@focusout"(){this._isFocused=!1}})},handleMousedown(){if(window.addEventListener("mousemove",this._throttledOnMouseMove),window.addEventListener("touchmove",this._throttledOnMouseMove),this.$event.target===this.$refs.sliderMin){this._currentSlider=this._sliderMin,this.$refs.sliderMin.focus();return}if(this.$event.target===this.$refs.sliderMax){this._currentSlider=this._sliderMax,this.$refs.sliderMax.focus();return}let{x:e,width:t}=this.$el.getBoundingClientRect(),s=(this.$event.clientX-e)/t;this._currentSlider=this._fixedMin&&this._sliderMax||this.getClosestSlider(s),this.$refs[this._currentSlider.name].focus(),this._currentSlider.value=r(s,this._steps),this.updateModel()},handleMouseup(){window.removeEventListener("mousemove",this._throttledOnMouseMove),window.removeEventListener("touchmove",this._throttledOnMouseMove)},handleMousmove(e){let{x:t,width:s}=this.$el.getBoundingClientRect(),{clientX:o}=e.type==="touchmove"?e.touches[0]:e,l=(o-t)/s;l=r(l,this._steps),l=a(l,0,this._maxValue),l>this._sliderMax.value&&this._currentSlider===this._sliderMin&&(this._currentSlider=this._sliderMax,this._sliderMin.value=this._sliderMax.value,this.$refs.sliderMax.focus()),l<this._sliderMin.value&&this._currentSlider===this._sliderMax&&(this._currentSlider=this._sliderMin,this._sliderMax.value=this._sliderMin.value,this.$refs.sliderMin.focus()),this._currentSlider.value=l,this.updateModel()},getClosestSlider(e){let t=Math.abs(e-this._sliderMin.value),s=Math.abs(e-this._sliderMax.value);return t<s?this._sliderMin:this._sliderMax},getValueMin(){return this._sliderMin.value*this._range+this._min},getValueMax(){return this._sliderMax.value*this._range+this._min},getSteps(){return Math.floor(this._steps)+1},updateModel(){let e=this.getValueMin().toFixed(this._stepPrecision),t=this.getValueMax().toFixed(this._stepPrecision);this._model[0]=parseFloat(e),this._model[1]=parseFloat(t)},onModelUpdate(){if(this._model.length!==2)return;let e=this._min/this._range,t=this._model[0]/this._range-e,s=this._model[1]/this._range-e;t=a(t,0,this._maxValue),s=a(s,0,this._maxValue),this._sliderMin.value=r(t,this._steps),this._sliderMax.value=r(s,this._steps)},trackFill:{":style"(){return{left:this._sliderMin.value*100+"%",width:(this._sliderMax.value-this._sliderMin.value)*100+"%"}}},sliderMin:{"x-show"(){return!this._fixedMin},":style"(){return{left:this._sliderMin.value*100+"%",transform:"translateX(-50%)"}},"x-ref":"sliderMin",...h.sliderMin},sliderMax:{":style"(){return{left:this._sliderMax.value*100+"%",transform:"translateX(-50%)"}},"x-ref":"sliderMax",...h.sliderMax},labelMin:{"x-show"(){return this._showLabels||this._showLabelsOnFocus&&this._isFocused},"x-text"(){return this.getValueMin().toFixed(this._stepPrecision)}},labelMax:{"x-show"(){return this._showLabels||this._showLabelsOnFocus&&this._isFocused},"x-text"(){return this.getValueMax().toFixed(this._stepPrecision)}},step:{":style"(){return{left:this._step/this._range*100*this.index+"%",transform:"translateX(-50%)"}},":class"(){let e=this._step/this._range*this.index,t=this.$el.attributes,s="";return e>=this._sliderMin.value&&e<=this._sliderMax.value?s=t["class-filled"]?.textContent||"":s=t["class-default"]?.textContent||"",s}}}))}document.addEventListener("alpine:init",()=>{Alpine.plugin(n)});})();
